<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="expMapper">

	<resultMap type="Experience" id="ExperienceResultSet">
		<id column="exno" property="exNo"/>
		<result column="usno" property="usNo"/>
		<result column="language" property="language"/>
		<result column="exp_category" property="expCategory"/>
		<result column="exp_tag" property="expTag"/>
		<result column="exp_title" property="expTitle"/>
		<result column="exp_content" property="expContent"/>
		<result column="activity" property="activity"/>
		<result column="max_people" property="maxPeople"/>
		<result column="exp_date" property="expDate"/>
		<result column="start_time" property="startTime"/>
		<result column="end_time" property="endTime"/>
		<result column="use_time" property="useTime"/>
		<result column="interval_time" property="intervalTime"/>
		<result column="supplies" property="supplies"/>
		<result column="deadline" property="deadline"/>
		<result column="price" property="price"/>
		<result column="add_basic" property="addBasic"/>
		<result column="add_detail" property="addDetail"/>
		<result column="add_ref" property="addRef"/>
		<result column="zip_code" property="zipCode"/>
		<result column="apply_date" property="applyDate"/>
		<result column="start_date" property="startDate"/>
		<result column="end_date" property="endDate"/>
		<result column="operate_day" property="operateDay"/>
		<result column="status" property="status"/>
		<result column="deny" property="deny"/>
		<result column="deny_content" property="denyContent"/>
		<result column="origin_name" property="originName"/>
		<result column="change_name" property="changeName"/>
		<result column="file_path" property="filePath"/>

		<result column="epno" property="epNo"/>
		<result column="amount" property="amount"/>
		<result column="pay_date" property="payDate"/>
		<result column="exp_date" property="expDate"/>
		<result column="people" property="people"/>
	</resultMap>
	
	<select id="selectExpListCount" resultType="_int">
		select count(*)
		  from experience
	</select>
	
	<select id="selectExpList" resultMap="ExperienceResultSet">
		select e.status, e.exp_Title, e.start_date, e.apply_date,
       		   substr(e.add_basic, 1, 3) as local,
               count(p.exno) as totalSal
  		  from experience e
     left join expPay p on(e.exno=p.exno) 
         group by e.status, e.exp_Title, e.start_date, e.apply_date, substr(e.add_basic, 1, 3)
 	     order by status asc, totalSal desc
	</select>
	

</mapper>
